$(document).ready(function(){var t,r,e=$(".container"),o=$(".parallax"),s=0,i=$("nav");o.imagesLoaded({background:!0}).done(function(t){o.addClass("lazyloaded")}),$(window).scroll(function(){s=$(window).scrollTop(),r=s-o.offset().top,t=e.offset().top,s<t&&o.css("backgroundPositionY",s/2+"px"),s>t&&i.addClass("sticky"),0===s&&i.removeClass("sticky")}),$.get("https://ochremusic.com/api/spotify",function(t){$("#followers .spotify").html(t.spotify)}),$.get("https://ochremusic.com/api/soundcloud",function(t){$("#followers .soundcloud").html(t.soundcloud)}),$.get("https://ochremusic.com/api/twitter",function(t){$("#followers .twitter").html(t.twitter)}),$.get("https://ochremusic.com/api/mailchimp",function(t){$("aside #mailchimp").html("Join "+t.mailchimp+" subscribers and")})}),$("#list-subscribe").submit(function(t){t.preventDefault();var r=$("input:submit",$(this)),e=r.val();r.prop("disabled",!0).val("Sending…");var o=$(this).attr("action"),s=$(this).serialize();$.post(o,s,function(t){return r.prop("disabled",!1).val(e),t.error&&"subscribed"===t.status?($("#list-res-error").html("Error: "+t.error),void $("#list-res").html('You can update your profile <a href="'+t.updateUrl+'">here</a>.')):!t.error||"unsubscribed"!==t.status&&"pending"!==t.status?t.error?($("#list-res-error").html("Error: "+t.error),void $("#list-res").empty()):($("#list-res-error").empty(),void $("#list-res").html(t.success)):($("#list-res-error").html("Error: "+t.error),void $("#list-res").html('You can always resubscribe <a href="http://eepurl.com/gphAPb">here</a>. You will receive a confirmation opt-in email.'))})});var $contactForm=$("#contact-form");$contactForm.submit(function(t){t.preventDefault();var r=$("input:submit",$contactForm),e=r.val();$.post({url:"https://ochremusic.com/api/contact",data:$(this).serialize(),dataType:"json",beforeSend:function(){r.prop("disabled",!0).val("Sending message…")},success:function(t){$contactForm.append("<div class='success'>"+t.success+"</div>"),r.val("Message sent!"),$("#contact-form")[0].reset(),setTimeout(function(){$(".success").fadeOut(function(){$(this).remove()}),r.prop("disabled",!1).val(e)},5e3)},error:function(t){$contactForm.append("<div class='error'>"+t.error+"</div>"),r.val("Sending failed!"),setTimeout(function(){$(".error").fadeOut(function(){$(this).remove()}),r.prop("disabled",!1).val(e)},5e3)}})});