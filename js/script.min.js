$(document).ready(function(){$.stellar({horizontalScrolling:!1}),document.addEventListener("lazybeforeunveil",function(t){var e=t.target.getAttribute("data-bg");e&&(t.target.style.backgroundImage="url("+e+")")}),$.get("https://ochremusic.com/api/spotify",function(t){$("#followers .spotify").html(t.spotify)}),$.get("https://ochremusic.com/api/soundcloud",function(t){$("#followers .soundcloud").html(t.soundcloud)}),$.get("https://ochremusic.com/api/facebook",function(t){$("#followers .facebook").html(t.facebook)}),$.get("https://ochremusic.com/api/twitter",function(t){$("#followers .twitter").html(t.twitter)}),$.get("https://ochremusic.com/api/mailchimp",function(t){$("aside #mailchimp").html(t.mailchimp)});var t=$("nav"),e=$("nav").outerHeight();$(window).scroll(function(){var r=$(document).scrollTop();r>e?t.addClass("sticky"):0===r&&t.removeClass("sticky")})}),$("#list-subscribe").submit(function(t){t.preventDefault();var e=$("input:submit",$(this)),r=e.val();e.prop("disabled",!0).val("Sending…");var o=$(this).attr("action"),s=$(this).serialize();$.post(o,s,function(t){return e.prop("disabled",!1).val(r),t.error&&"subscribed"===t.status?($("#list-res-error").html("Error: "+t.error),void $("#list-res").html('You can update your profile <a href="'+t.updateUrl+'">here</a>.')):!t.error||"unsubscribed"!==t.status&&"pending"!==t.status?t.error?($("#list-res-error").html("Error: "+t.error),void $("#list-res").empty()):($("#list-res-error").empty(),void $("#list-res").html(t.success)):($("#list-res-error").html("Error: "+t.error),void $("#list-res").html('You can always resubscribe <a href="http://eepurl.com/gphAPb">here</a>. You will receive a confirmation opt-in email.'))})});var $contactForm=$("#contact-form");$contactForm.submit(function(t){t.preventDefault();var e=$("input:submit",$contactForm),r=e.val();$.post({url:"https://ochremusic.com/api/contact",data:$(this).serialize(),dataType:"json",beforeSend:function(){e.prop("disabled",!0).val("Sending message…")},success:function(t){$contactForm.append("<div class='success'>"+t.success+"</div>"),e.val("Message sent!"),$("#contact-form")[0].reset(),setTimeout(function(){$(".success").fadeOut(function(){$(this).remove()}),e.prop("disabled",!1).val(r)},5e3)},error:function(t){$contactForm.append("<div class='error'>"+t.error+"</div>"),e.val("Sending failed!"),setTimeout(function(){$(".error").fadeOut(function(){$(this).remove()}),e.prop("disabled",!1).val(r)},5e3)}})});